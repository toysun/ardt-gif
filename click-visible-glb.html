<script>
  AFRAME.registerComponent("object-model", {
    init: function () {
      const castle = document.querySelector("#castle");
      const text = document.getElementById("text-box");
      castle.addEventListener("click", function (event) {
        if (text.object3D.visible == false && event.detail.cursorEl) {
          text.object3D.visible = true;
        }
      });
    },
  });
</script>

<a-scene
  id="thescene"
  cursor="fuse: false; rayOrigin: mouse"
  embedded
  arjs="sourceType: webcam; trackingMethod: best;"
>
  <a-light type="point" color="white" position="0 5 0" intensity="3"></a-light>
  <a-assets>
    <a-asset-item id="mega" src="mega/scene.gltf"></a-asset-item>
  </a-assets>

  <a-marker preset="custom" type="pattern" url="tiger.patt">
    <a-entity
      gltf-model="#mega"
      scale="0.05 0.05 0.05"
      position="0 0 0"
      rotation="-90 0 0"
      object-model
      id="castle"
    ></a-entity>
    <a-entity geometry="primitive: plane;" material="opacity: 0">
      <a-text
        value="Clicked!"
        visible="false"
        id="text-box"
        position="-0.425 0.293 -0.531"
        rotation="-84.347 54.042 -51.893"
      ></a-text>
    </a-entity>
  </a-marker>

  <!-- add a basic camera -->
  <!-- So object will land on marker -->
  <a-entity camera> </a-entity>
</a-scene>
